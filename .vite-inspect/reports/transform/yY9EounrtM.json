{
  "resolvedId": "D:/code/bili/src/views/HomeView.vue",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<script lang=\"ts\" setup>\nimport MerText from '@/components/MerText.vue'\nimport gsap from 'gsap'\ntype file = File & {\n  url: string\n  file: File\n  typeEasy: string\n  toggetPlay?: (...arg: any[]) => void\n  isPlay: boolean\n}\nconst files: file[] = reactive([])\n// 素材管理\nfunction uploadFiles(e: Event) {\n  const uploadFiles = (e.target as HTMLInputElement).files ?? []\n  for (const file of Object.values(uploadFiles)) {\n    if (['image', 'video', 'audio'].includes(file.type.split('/')[0])) {\n      const url = useObjectUrl(file).value!\n      if (url) {\n        // @ts-ignore\n        let temp: file = {\n          arrayBuffer: file.arrayBuffer,\n          lastModified: file.lastModified,\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          webkitRelativePath: file.webkitRelativePath,\n          slice: file.slice,\n          stream: file.stream,\n          text: file.text,\n          file: file,\n          isPlay: false,\n          url,\n          typeEasy: file.type.split('/')[0],\n        }\n        if (temp.typeEasy === 'video')\n          temp.toggetPlay = function (e: HTMLVideoElement) {\n            if (this.isPlay) {\n              e.pause()\n            } else {\n              e.play()\n            }\n            this.isPlay = !this.isPlay\n          }\n        files.push(temp)\n      }\n    }\n  }\n}\nfunction cleanFiles(e: MouseEvent) {\n  ;(e.target as HTMLInputElement).value = ''\n}\nconst audioContaier: Ref<HTMLElement[]> = ref([])\nfunction delFile(src: string) {\n  files.splice(\n    files.findIndex((e) => e.url === src),\n    1\n  )\n}\n// 文件上传框动画\nconst inputFile: Ref<HTMLElement | null> = ref(null)\nonMounted(() => {\n  gsap.fromTo(\n    inputFile.value,\n    {\n      width: 0,\n      opacity: 0,\n      overflow: 'hidden'\n    },\n    {\n      ease: 'power1.inOut',\n      delay: 0.5,\n      duration: 1.5,\n      width: '100%',\n      opacity: 1,\n      overflow: 'visible'\n    }\n  )\n})\nlet element: HTMLElement | null = null\nfunction dragstart(e: DragEvent) {\n  if (e.dataTransfer) {\n    e.dataTransfer.dropEffect = 'move'\n  }\n  element = e.target as HTMLElement\n}\nfunction drop(e: DragEvent) {\n  if (element) {\n    ;(e.currentTarget as HTMLElement).append(element)\n    element = null\n  }\n}\n</script>\n\n<template>\n  <main class=\"grid h-full grid-cols-5 grid-rows-2 gap-2 p-2\">\n    <!-- 属性设置 -->\n    <section class=\"col-span-2 row-span-1\" @dragover.prevent @drop.prevent=\"drop\">\n      <header><mer-text content=\"属性设置\" /></header>\n    </section>\n    <!-- 预览窗口 -->\n    <section class=\"col-span-2 row-span-1\" @dragover.prevent @drop.prevent=\"drop\">\n      <header><mer-text content=\"预览窗口\" /></header>\n    </section>\n    <!-- 效果面板 -->\n    <section class=\"col-span-1 row-span-2\" @dragover.prevent @drop.prevent=\"drop\">\n      <header><mer-text content=\"效果面板\" /></header>\n    </section>\n    <!-- 素材管理 -->\n    <section class=\"col-span-1 row-span-1\" >\n      <header><mer-text content=\"素材管理\" /></header>\n      <div ref=\"inputFile\">\n        <input\n          type=\"file\"\n          accept=\"image/*,video/*,audio/*\"\n          multiple\n          @change=\"uploadFiles\"\n          @click=\"cleanFiles\"\n          class=\"block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-600 placeholder-gray-400/70 file:rounded-full file:border-none file:bg-gray-200 file:px-4 file:py-1 file:text-sm file:text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:placeholder-gray-500 dark:file:bg-gray-800 dark:file:text-gray-200 dark:focus:border-blue-300\"\n        />\n      </div>\n      <div\n        class=\"grid grid-cols-[repeat(auto-fit,minmax(80px,1fr))] gap-4 overflow-auto rounded-lg\"\n        @dragover.prevent @drop.prevent=\"drop\"\n      >\n        <div\n          v-for=\"file in files\"\n          :key=\"file.url\"\n          class=\"flex flex-col\"\n          :title=\"file.name\"\n          draggable=\"true\"\n          @dragstart=\"dragstart\"\n        >\n          <img\n            draggable=\"false\"\n            v-if=\"file.typeEasy === 'image'\"\n            :src=\"file.url\"\n            :alt=\"file.name\"\n            class=\"w-full flex-1 rounded-lg object-cover\"\n          />\n          <video\n            v-if=\"file.typeEasy === 'video'\"\n            :src=\"file.url\"\n            :alt=\"file.name\"\n            preload=\"metadata\"\n            class=\"w-full flex-1 rounded-lg object-cover\"\n            @dblclick=\"file.toggetPlay?.($event.target)\"\n          ></video>\n          <div\n            v-if=\"file.typeEasy === 'audio'\"\n            class=\"flex w-full flex-1 flex-col justify-center rounded-lg\"\n            :data-src=\"file.url\"\n            ref=\"audioContaier\"\n            @dblclick=\"file.toggetPlay?.()\"\n          ></div>\n          <div class=\"flex justify-evenly\">\n            <div class=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n              <mer-text :content=\"file.name\" />\n            </div>\n            <button @click=\"delFile(file.url)\" class=\"whitespace-nowrap text-blue-400\">\n              <mer-text content=\"删除\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n    <!-- 时间线 -->\n    <section class=\"col-span-3 row-span-1\" @dragover.prevent @drop.prevent=\"drop\">\n      <header><mer-text content=\"时间线\" /></header>\n    </section>\n  </main>\n</template>\n\n<style scoped >\nsection {\n  @apply flex flex-col gap-4 overflow-auto rounded-lg border border-gray-200 p-4 dark:border-none dark:bg-gray-800;\n}\n\nheader {\n  @apply text-center;\n}\n</style>\n",
      "start": 1683377254644,
      "end": 1683377255064
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"D:/code/bili/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"D:/code/bili/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nimport \"D:/code/bili/src/views/HomeView.vue?vue&type=style&index=0&scoped=72f2d68c&lang.css\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-72f2d68c\"]]);\n",
      "start": 1683377255064,
      "end": 1683377255164,
      "order": "normal"
    },
    {
      "name": "unplugin-vue-components",
      "result": "/* unplugin-vue-components disabled */import _sfc_main from \"D:/code/bili/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"D:/code/bili/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nimport \"D:/code/bili/src/views/HomeView.vue?vue&type=style&index=0&scoped=72f2d68c&lang.css\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-72f2d68c\"]]);\n",
      "start": 1683377255165,
      "end": 1683377255165,
      "order": "post"
    }
  ]
}
